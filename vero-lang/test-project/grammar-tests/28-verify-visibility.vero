# Test: Visibility Assertions
# Category: Assertions - Visibility (Updated to PAGEACTIONS Pattern)

PAGE VisibilityPage {
    FIELD header = "h1"
    FIELD loader = ".loading"
    FIELD error = ".error"
    FIELD dashboard = "Dashboard"
}

PAGEACTIONS VisibilityPageActions FOR VisibilityPage {
    isHeaderVisible RETURNS FLAG {
        RETURN VISIBLE OF header
    }

    isLoaderVisible RETURNS FLAG {
        RETURN VISIBLE OF loader
    }

    isErrorVisible RETURNS FLAG {
        RETURN VISIBLE OF error
    }

    isDashboardVisible RETURNS FLAG {
        RETURN VISIBLE OF dashboard
    }

    awaitPage {
        WAIT FOR header
    }
}

FEATURE VisibilityAssertions {
    USE VisibilityPageActions

    SCENARIO VisibilityChecks {
        # Is visible - using getters
        FLAG isDashboard = PERFORM VisibilityPageActions.isDashboardVisible
        VERIFY isDashboard IS TRUE

        FLAG isHeader = PERFORM VisibilityPageActions.isHeaderVisible
        VERIFY isHeader IS TRUE

        # Is not visible
        FLAG isError = PERFORM VisibilityPageActions.isErrorVisible
        VERIFY isError IS NOT TRUE

        # Is hidden
        FLAG isLoader = PERFORM VisibilityPageActions.isLoaderVisible
        VERIFY isLoader IS NOT TRUE

        # Direct text verification (still allowed)
        VERIFY "Dashboard" IS VISIBLE
        VERIFY "Error" IS NOT VISIBLE
    }
}

# Test: State Assertions
# Category: Assertions - State (Updated to PAGEACTIONS Pattern)

PAGE StatePage {
    FIELD submitBtn = "Submit"
    FIELD checkbox = "#agree"
    FIELD input = "#email"
    FIELD disabledButton = "Disabled Button"
}

PAGEACTIONS StatePageActions FOR StatePage {
    isSubmitEnabled RETURNS FLAG {
        RETURN ENABLED OF submitBtn
    }

    isCheckboxChecked RETURNS FLAG {
        RETURN CHECKED OF checkbox
    }

    isInputEmpty RETURNS FLAG {
        RETURN VISIBLE OF input
    }

    isDisabledButtonDisabled RETURNS FLAG {
        RETURN VISIBLE OF disabledButton
    }

    checkCheckbox {
        CHECK checkbox
    }

    enterEmail WITH value {
        FILL input WITH value
    }

    clickSubmit {
        CLICK submitBtn
    }
}

FEATURE StateAssertions {
    USE StatePageActions

    SCENARIO StateChecks {
        # Enabled/Disabled via getters
        FLAG isEnabled = PERFORM StatePageActions.isSubmitEnabled
        VERIFY isEnabled IS TRUE

        # Checked state via getters
        FLAG isChecked = PERFORM StatePageActions.isCheckboxChecked
        VERIFY isChecked IS NOT TRUE

        PERFORM StatePageActions.checkCheckbox
        FLAG nowChecked = PERFORM StatePageActions.isCheckboxChecked
        VERIFY nowChecked IS TRUE

        # Empty state
        FLAG isEmpty = PERFORM StatePageActions.isInputEmpty
        VERIFY isEmpty IS TRUE

        # Direct verification (still allowed)
        VERIFY "Submit" IS ENABLED
        VERIFY "Disabled Button" IS DISABLED
    }
}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vero Test Recorder</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="popup-container">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <circle cx="12" cy="12" r="3" fill="currentColor"></circle>
        </svg>
        <span>Vero Recorder</span>
      </div>
      <div class="connection-status" id="connectionStatus">
        <span class="status-dot"></span>
        <span class="status-text">Disconnected</span>
      </div>
    </header>

    <!-- Recording Controls -->
    <section class="controls">
      <button id="recordBtn" class="btn btn-primary btn-large">
        <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
          <circle cx="12" cy="12" r="8"></circle>
        </svg>
        <span>Start Recording</span>
      </button>

      <div class="control-row" id="recordingControls" style="display: none;">
        <button id="pauseBtn" class="btn btn-secondary">
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
            <rect x="6" y="4" width="4" height="16"></rect>
            <rect x="14" y="4" width="4" height="16"></rect>
          </svg>
          <span>Pause</span>
        </button>

        <button id="stopBtn" class="btn btn-danger">
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
            <rect x="6" y="6" width="12" height="12"></rect>
          </svg>
          <span>Stop</span>
        </button>
      </div>
    </section>

    <!-- Recording Status -->
    <section class="status" id="recordingStatus" style="display: none;">
      <div class="recording-indicator">
        <span class="recording-dot"></span>
        <span id="statusText">Recording...</span>
      </div>
      <div class="action-count">
        <span id="actionCount">0</span> actions
      </div>
    </section>

    <!-- Actions List -->
    <section class="actions-section">
      <div class="section-header">
        <h3>Recorded Actions</h3>
        <button id="clearBtn" class="btn btn-icon" title="Clear all actions">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 6h18M8 6V4a2 2 0 012-2h4a2 2 0 012 2v2m3 0v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6h14z"></path>
          </svg>
        </button>
      </div>
      <div id="actionsList" class="actions-list">
        <div class="empty-state">
          <svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 20h9M16.5 3.5a2.121 2.121 0 013 3L7 19l-4 1 1-4L16.5 3.5z"></path>
          </svg>
          <p>No actions recorded yet</p>
          <p class="hint">Click "Start Recording" to begin</p>
        </div>
      </div>
    </section>

    <!-- Tools Section -->
    <section class="tools-section">
      <button id="pickElementBtn" class="btn btn-secondary btn-small">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"></path>
        </svg>
        Pick Element
      </button>

      <button id="addAssertionBtn" class="btn btn-secondary btn-small">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        Add Assertion
      </button>
    </section>

    <!-- Code Preview -->
    <section class="code-section" id="codeSection" style="display: none;">
      <div class="section-header">
        <h3>Generated Vero Code</h3>
        <div class="code-actions">
          <button id="copyCodeBtn" class="btn btn-icon" title="Copy to clipboard">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2"></rect>
              <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"></path>
            </svg>
          </button>
          <button id="downloadCodeBtn" class="btn btn-icon" title="Download code">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"></path>
            </svg>
          </button>
        </div>
      </div>
      <pre id="codePreview" class="code-preview"><code></code></pre>
    </section>

    <!-- Send to IDE -->
    <section class="ide-section">
      <button id="sendToIDEBtn" class="btn btn-primary" disabled>
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"></path>
        </svg>
        Send to Vero IDE
      </button>
    </section>

    <!-- Settings Link -->
    <footer class="footer">
      <a href="#" id="settingsLink" class="settings-link">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"></circle>
          <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"></path>
        </svg>
        Settings
      </a>
      <span class="version">v1.0.0</span>
    </footer>
  </div>

  <!-- Assertion Modal -->
  <div id="assertionModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Add Assertion</h3>
        <button id="closeModalBtn" class="btn btn-icon">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6L6 18M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="assertionType">Assertion Type</label>
          <select id="assertionType" class="form-control">
            <option value="visible">Element is visible</option>
            <option value="hidden">Element is hidden</option>
            <option value="text">Text is visible</option>
            <option value="contains">Element contains text</option>
            <option value="value">Element has value</option>
            <option value="enabled">Element is enabled</option>
            <option value="disabled">Element is disabled</option>
          </select>
        </div>
        <div class="form-group">
          <label for="assertionSelector">Element Selector</label>
          <div class="input-with-button">
            <input type="text" id="assertionSelector" class="form-control" placeholder="Click Pick to select element">
            <button id="pickForAssertionBtn" class="btn btn-secondary btn-small">Pick</button>
          </div>
        </div>
        <div class="form-group" id="assertionValueGroup" style="display: none;">
          <label for="assertionValue">Value</label>
          <input type="text" id="assertionValue" class="form-control" placeholder="Expected value or text">
        </div>
      </div>
      <div class="modal-footer">
        <button id="cancelAssertionBtn" class="btn btn-secondary">Cancel</button>
        <button id="confirmAssertionBtn" class="btn btn-primary">Add Assertion</button>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settingsModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Settings</h3>
        <button id="closeSettingsBtn" class="btn btn-icon">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6L6 18M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="apiUrl">Vero IDE URL</label>
          <input type="text" id="apiUrl" class="form-control" placeholder="http://localhost:3000/api">
        </div>
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="autoSync">
            <span>Auto-sync with IDE</span>
          </label>
        </div>
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="generatePageObjects" checked>
            <span>Generate page objects</span>
          </label>
        </div>
        <div class="form-group">
          <label for="selectorStrategy">Selector Strategy</label>
          <select id="selectorStrategy" class="form-control">
            <option value="auto">Auto (Recommended)</option>
            <option value="testid">Prefer data-testid</option>
            <option value="id">Prefer ID</option>
            <option value="css">Prefer CSS</option>
          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button id="saveSettingsBtn" class="btn btn-primary">Save Settings</button>
      </div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
